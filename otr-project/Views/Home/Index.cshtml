@{
    Layout = null;
    ViewBag.Title = "Rambla";
    var regionList = ViewBag.RegionId as SelectList;
}

<!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    <!-- Bootstrap CSS -->
    <link href="@Url.Content("~/Content/designfrmk/bootstrap.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/style.less")" rel="stylesheet/less" type="text/css" />

    <!--
    <link href="@Url.Content("~/Content/reset.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/grid.css")" rel="stylesheet" type="text/css" />
    
    <link href="@Url.Content("~/Content/style.less")" rel="stylesheet/less" type="text/css" />

    <link href="@Url.Content("~/Content/print.css")" rel="stylesheet" type="text/css" media="print" />
    -->
    <!------ CLEAN UP ------>
    <link href="@Url.Content("~/Content/themes/ui-lightness/jquery-ui-1.8.16.custom.css")" rel="stylesheet" type="text/css" />
    <link href="@Url.Content("~/Content/themes/classic/galleria.classic.css")" rel="stylesheet" type="text/css" />
    <!------ CLEAN UP ------>
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/less.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery-1.8.0.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery-ui-1.8.16.custom.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/galleria-1.2.6.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/themes/classic/galleria.classic.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/MicrosoftMvcAjax.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/MicrosoftAjax.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.blockUI.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery-ui.multidatespicker.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Content/designfrmk/bootstrap.js")" type="text/javascript"></script>

    <!-- To fix facebook's stupid redirect hash -->
    <script type="text/javascript">        if (window.location.hash == '#_=_') window.location.hash = '';</script>
    <meta http-equiv="cache-control" content="no-cache, no-store" />
</head>
<body>
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
            <div class="row">
                <div class="span4">
                    <a class="brand" href="@Url.Content("~/")">
                        <img src="@Url.Content("~/Content/images/Logo.png")" />
                    </a>
                </div>
                <div class="span4 offset4">
                    @if (Request.IsAuthenticated){
                        <ul class="nav pull-right">
                            <li class="dropdown" id="menu1">
                                <a class="dropdown-toggle" data-toggle="dropdown" href="#menu1">
                                    Hi, @Session["USER_F_NAME"]
                                    <b class="caret"></b>
                                </a>
                                <ul class="dropdown-menu">
                                    <li><a href="@Url.Content("~/User")">Dashboard</a></li>
                                    <li><a href="@Url.Content("~/User/MessageBox")">Inbox</a></li>
                                    <li><a href="@Url.Content("~/User/Items")">Items Listed</a></li>
                                    <li><a href="@Url.Content("~/User/ItemsBorrowed")">Items Borrowed</a></li>
                                    <li><a href="@Url.Content("~/Account/LogOff")">Sign Out</a></li>
                                </ul>
                            </li>
                        </ul>
                    }
                    else
                    {
                        <a class="btn btn-large btn-primary pull-right" href="@Url.Content("~/Account/Logon")">Login</a>  
                    }  
                    <div class="row">
                        <div class="span4">
                            <div class="nav-collapse">
                                <ul class="nav pull-right">
                                    <li><a href="#">Discover Community</a></li>
                                    <li><a href="#">Trust & Security</a></li>
                                    <li><a href="#">Live Local</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
      </div>
    </div>
    <div id="myCarousel" class="carousel slide tpad20">
        <div class="carousel-inner">
            <div class="item">
                <img class="home-background" src="@Url.Content("~/Content/images/rambla_bg/img1.jpg")" />
            </div>
            <div class="item">
                <img class="home-background" src="@Url.Content("~/Content/images/rambla_bg/img2.jpg")" />
            </div>
            <div class="item">
                <img class="home-background" src="@Url.Content("~/Content/images/rambla_bg/img3.jpg")" />
            </div>
            <div class="item">
                <img class="home-background" src="@Url.Content("~/Content/images/rambla_bg/img4.jpg")" />
            </div>
            <div class="active item">
                <img class="home-background" src="@Url.Content("~/Content/images/rambla_bg/img5.jpg")" />
            </div>
            <div class="item">
                <img class="home-background" src="@Url.Content("~/Content/images/rambla_bg/img6.jpg")" />
            </div>
            <div class="item">
                <img class="home-background" src="@Url.Content("~/Content/images/rambla_bg/img7.jpg")" />
            </div>
            <div class="item">
                <img class="home-background" src="@Url.Content("~/Content/images/rambla_bg/img8.1.jpg")" />
            </div>
        </div>
        <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
        <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
        <div class="container">
            <div class="home-body-container">
                <div class="row">
                    <div class="span5 home-form-wrapper">
                        <h1 class="center shadowy tpad10">
                            <span class="color-blue">Rent</span>
                            Stuff, make 
                            <span class="color-pink">money</span>
                        </h1>
                        <br />
                        <form class="hpad10">
                            <div class="row-fluid tpad10">
                                <div class="span6 center">
                                    <input type="text" class="input-wider-med search-query input-fatty" placeholder="First Name" />
                                </div>
                                <div class="span6 center">
                                    <input type="text" class="input-wider-med search-query input-fatty" placeholder="Last Name" />
                                </div>
                            </div>
                            <div class="row-fluid tpad10">
                                <div class="span12 center">
                                    <input type="text" class="input-full search-query input-fatty" placeholder="Email" />
                                </div>
                            </div>
                            <div id="manual-location" class="row-fluid tpad10">
                                <div class="span6 center">
                                    <input id="City" type="text" class="input-wider-med search-query input-fatty" placeholder="City" />
                                </div>
                                <div class="span6 center">
                                    @Html.DropDownList("RegionId", regionList, "Province", new { @class="input-wider-med search-query input-fatty" })
                                </div>
                            </div>
                            <div class="row-fluid tpad20">
                                <div class="span6 center">
                                    <input type="submit" class="btn btn-primary btn-large" value="Request Access" />
                                </div>
                                <div class="span6 center">
                                    <button class="btn btn-large btn-success">Register with Facebook</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <br />
                <br />
                <br />
                <br />
                <br />
                <div class="row tpad20">
                    <div class="home-search-wrapper well">
                        <form class="hpad10" action="@Url.Content("~/Search/Index/1")" method="post">
                            <div class="row-fluid tpad10">
                                <div class="span4">
                                    <h2 class="pull-right">Search for items</h2>
                                </div>
                                <div class="span8 pull-left">
                                    <div class="input-append">
                                        <input id="home-search" type="text" class="input-xxlarge search-query input-fatty" />
                                        <button id="home-search-btn" type="submit" class="btn btn-primary btn-large">Search</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <br />
                <div class="row tpad20">
                    <div class="span10">
                        <div class="nav-collapse">
                            <ul class="nav">
                                <li><a href="#">Abous Us</a></li>
                                <li><a href="#">Inner Workings</a></li>
                                <li><a href="#">Careers</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="footer_all">
        <div id="footer_shadow">
        </div>
        <div id="footer_bottom_strip">
        </div>
        <!------ Footer ------>
        <div id="footer">
            <div class="container_12 noprint">
                <div class= "grid_5">
                    <a class = "footer_links" href="@Url.Content("~/Content/rambla.pdf")">How Stuff Works</a>
                </div>
                <div class="grid_2 push_5">
                    <span id="comodo_ssl_seal">
                        <img src="@Url.Content("~/Content/images/comodo_secure.gif")" alt="Instant SSL Certificate Secure Site" width="76" height="40">
                    </span>
                </div>
                <div class="clear">
                    &nbsp;</div>
            </div>
        </div>
    </div>
</body>
</html>

<script type="text/javascript">
    $(function () {
        $('.dropdown-toggle').dropdown();
    });
</script>
<script type="text/javascript">
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function (position) {
            var coord = position.coords.latitude + "," + position.coords.longitude;
            GetAddress(position.coords.latitude, position.coords.longitude);
        }, error);
    }
    else {
        //something is wrong. Revert to IP based location
        DoManual();
    }
    function error(msg){
        DoManual();
    }
    function GetAddress(lat, lang) {
        var latlng = new google.maps.LatLng(lat, lang);
        var geocoder = new google.maps.Geocoder();
        geocoder.geocode({ 'latLng': latlng }, function (results, status) {
            var city, prov;
            if (status == google.maps.GeocoderStatus.OK) {
                if (results[0]) {
                    for (addr in results[0].address_components) {
                        for (type in results[0].address_components[addr].types) {
                            if (results[0].address_components[addr].types[type] == "locality") {
                                city = results[0].address_components[addr].long_name;
                                break;
                            }
                            if (results[0].address_components[addr].types[type] == "administrative_area_level_1") {
                                prov = results[0].address_components[addr].long_name;
                                break;
                            }
                        }
                    }
                    if (city && prov) {
                        SetFormValues(city, prov);
                        DoAuto(city + ", " + prov);
                    }
                }
            }
        });
    }

    function SetFormValues(city, prov) {
        $("#City").val(city);
        var options = $("#RegionId").children("option");
        for (o in options) {
            if (options[o].text == prov){
                $("#RegionId").val(options[o].value);
                break;
            }
        }
    }
</script>