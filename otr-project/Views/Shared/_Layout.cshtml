<!DOCTYPE html>
<html lang="en">
<head>
        <title>@ViewBag.Title</title>
        
        <!-- Bootstrap CSS -->
        <link href="@Url.Content("~/Content/designfrmk/bootstrap.css")" rel="stylesheet" type="text/css" />

        <!-- Multiple Date Picker (customize) -->
        <link href="@Url.Content("~/Content/mdp.css")" rel="stylesheet" type="text/css" />

        <!-- Refactor: -->
        <link href="@Url.Content("~/Content/style.less")" rel="stylesheet/less" type="text/css" />
        <!--link href="@Url.Content("~/Content/print.css")" rel="stylesheet" type="text/css" media="print" /-->
        
        <!--
        Deprecate: 
        <link href="@Url.Content("~/Content/reset.css")" rel="stylesheet" type="text/css" />
        <link href="@Url.Content("~/Content/grid.css")" rel="stylesheet" type="text/css" />
        -->

        <!------ JQuery Plugin CSS ------>
        <link href="@Url.Content("~/Content/themes/ui-lightness/jquery-ui-1.8.16.custom.css")" rel="stylesheet" type="text/css" />
        <link href="@Url.Content("~/Content/themes/classic/galleria.classic.css")" rel="stylesheet" type="text/css" />

        <!------ Javascript Includes ------>
        <script src="https://maps.googleapis.com/maps/api/js?sensor=false" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/less.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery-1.8.0.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery-ui-1.8.23.custom.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/galleria-1.2.6.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Content/themes/classic/galleria.classic.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/MicrosoftMvcAjax.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/MicrosoftAjax.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery.blockUI.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery-ui.multidatespicker.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Content/designfrmk/bootstrap.js")" type="text/javascript"></script>

        <!-- To fix facebook's stupid redirect hash -->
        <script type="text/javascript">        if (window.location.hash == '#_=_') window.location.hash = '';</script>
        <meta http-equiv="cache-control" content="no-cache, no-store" />
        
        <!-- Script to enable Bootstrap dropdown -->
        <script type="text/javascript">
            $(function () {
                $('.dropdown-toggle').dropdown();
            });
            
        </script>
    </head>
    <body style="height:100%">
    
    @{ 
        otr_project.Models.RentalCart cart = otr_project.Models.RentalCart.GetCart(this.Context);
        if (cart.GetCartItems().Count > 0)
        {
            Session["RentalCartItems"] = cart.GetCartItems().Count;
        }

        if (Session["RentalCartItems"] == null)
        {
            Session["RentalCartItems"] = 0;
        }
    }
    @{
        string search_box_value = "";

        if (Request.FilePath.Contains("/Search") && Session["SEARCH_KEYWORD"] != null)
        {
            search_box_value = Session["SEARCH_KEYWORD"].ToString();
        }
    }
    
    <!-- Header nav bar -->
    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner custom-navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <!-- New login form is on all pages now and is running AJAX -->
                <!--
                <div class="row">
                    <div class="span5">
                        <fb:login-button size="xlarge" perms="email,user_birthday,user_likes,user_education_history,user_hometown,user_interests,user_activities,user_location">Login with Facebook</fb:login-button>
                    </div>
                    <div class="span1">~ OR ~</div>
                    <div class="span6">
                        @{
                            //Html.RenderPartial("_LogOnPartial", new otr_project.Models.LogOnModel());
                            }
                    </div>
                </div>
                -->
                <!-- END: New login form is on all pages now and is running AJAX -->
                <a class="brand span3" href="@Url.Content("~/")">
                    <img class="tpad5" src="@Url.Content("~/Content/images/Rambla_Logo.png")" />
                </a>
                <div class="nav-collapse">
                    <ul class="nav">
                        <li class="divider-vertical"></li>
                        <li class="header-elements">
                            <a href="@Url.Content("~/Item/Create")">
                                <button class="btn btn-large btn-primary">Add Item</button>
                            </a>
                        </li>
                        <li class="divider-vertical"></li>
                        <li class="center">
                            <form class="navbar-search tpad10" action="@Url.Content("~/Search/Index/1")" method="post">
                                <h4>Search for items</h4>
                                <input id="search_box" name="search" type="text" class="search-query span3" placeholder="Eg. Drill, tent, basketball etc." />
                            </form>
                        </li>
                        <li class="divider-vertical"></li>
                        <li class="header-elements">
                            <a id="cart_num" href="@Url.Action("Index", "RentalCart")">
                                <img class="tpad5" src="@Url.Content("~/Content/images/Cart_logo.png")" />
                                <h4>Your Cart (@Session["RentalCartItems"])</h4>
                            </a>
                        </li>
                        <li class="divider-vertical"></li>
                    </ul>
                    <ul class="nav pull-right">
                        @if (Request.IsAuthenticated)
                        {
                            <li class="dropdown header-elements tpad10 center">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    <h3>Hi @Session["USER_F_NAME"]
                                    <b class="caret"></b>
                                    </h3>
                                </a>
                                <ul class="dropdown-menu">
                                    <!-- No dashboard for Private Beta -->
                                    <!--li><a href="@Url.Content("~/User")">Dashboard</a></li-->
                                    <li><a href="@Url.Content("~/User/MessageBox")">Inbox</a></li>
                                    <li><a href="@Url.Content("~/User/Items")">Items Listed</a></li>
                                    <li><a href="@Url.Content("~/User/ItemsBorrowed")">Items Borrowed</a></li>
                                    <li><a href="@Url.Content("~/Account/LogOff")">Sign Out</a></li>
                                </ul>
                            </li>
                        }
                        else
                        {
                            <li class="pull-right center">
                                <a href="@Url.Content("~/Account/Logon")">
                                    <button type="button" class="btn btn-info btn-login">Login</button>
                                </a>
                            </li>
                        }
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- END: Header nav bar -->
    
    <!------ Body ------>
    <div class="container">
        <div class="body-container">
            @RenderBody()
            <div class="vpad20"></div>
        </div>
        <div class="row-fluid">
            <div class="span2 pull-left tpad10">
                <h4><a href="@Url.Content("~/Content/rambla.pdf")">How It Works</a></h4>
            </div>
            <div class="span10 bpad10">
                <img class="pull-right" src="@Url.Content("~/Content/images/comodo_secure.gif")" alt="Instant SSL Certificate Secure Site" width="76" height="40"/>
            </div>
        </div>
    </div>

    
    
    <!------ Pinterest Script -----
    <script type="text/javascript" src="//assets.pinterest.com/js/pinit.js"></script>
    -->

    <!------ GooglePlus Script ----->
    <script type="text/javascript">
        $(function () {
            $('select').addClass('shadow_select');
            $('select').wrap('<span class="select-wrapper" />');
            $('.select-wrapper').width($(this).width());

            $('select').focusin(function () {
                $('.select-wrapper').addClass('webkit_specific');
            });

            $('select').focusout(function () {
                $('.select-wrapper').removeClass('webkit_specific');
            });
        });
        $function () {
            var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
            po.src = 'https://apis.google.com/js/plusone.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
        })();
    </script>
    
    <!-- Uservoice Javascript -->
    <script type="text/javascript">
        var uvOptions = {};
        (function () {
            var uv = document.createElement('script'); uv.type = 'text/javascript'; uv.async = true;
            uv.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'widget.uservoice.com/8PFcoYESX5HncdvR8jd0ew.js';
            //uv.src = 'http://' + 'widget.uservoice.com/8PFcoYESX5HncdvR8jd0ew.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(uv, s);
        })();
    </script>
    <script>        !function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = "https://platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs); } } (document, "script", "twitter-wjs");</script>
    <!------ Facebook Script ------>
    @{Html.RenderPartial("FacebookInit");}

    <!-- Google Analytics Engine -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-35101978-1']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>
</body>
</html>
