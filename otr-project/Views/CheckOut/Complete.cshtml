@model IEnumerable<otr_project.Models.OrderDetailModel>

@{
    ViewBag.Title = "Rambla | CheckOut Complete";
}

<div class="row-fluid">
    <div class="span9">
        <h1>Your order is complete!</h1>
        <h3>Please wait for a confirmation email.</h3>
        <div class="row-fluid">
            <div class="span12 well border-up-down">
                <div class="row-fluid vpad10">
                    <div class="span2 center">
                        Item Details
                    </div>
                    <div class="span2 center">
                        Pickup Date
                    </div>
                    <div class="span2 center">
                        Return Date
                    </div>
                    <div class="span2 center">
                        Price/Day
                    </div>
                    <div class="span1 center">
                        Days
                    </div>
                    <div class="span1 center">
                        Deposit
                    </div>
                    <div class="span1 center">
                        Total
                    </div>
                </div>
                @foreach (otr_project.Models.OrderDetailModel item in Model)
                {
                    <div class="row-fluid vpad10 border-up-down">
                        <div class="span2 center">
                            @Html.ActionLink(item.Item.Name, "Details", "Item", new { id = item.Item.Id }, null)  
                                                           
                            @if (item.Item.ItemImages.Count > 0)
                            {
                                <img class="span12" src="@Url.Content("~/Item/GetItemImage/" + item.Item.ItemImages.ToList()[0].Id)" />
                            }
                            else
                            {
                                <img class="span12" src="@Url.Content("~/Content/images/default_item_image.jpg")" />
                            }
                        </div> 
                        <div class="span2 center">
                            @item.PickupDate.Date.ToString("dd-MMMM-yy")
                        </div>
                        <div class="span2 center">
                            @item.DrofoffDate.Date.ToString("dd-MMMM-yy")
                        </div>
                        <div class="span2 center">
                            <p>@item.UnitPrice.ToString("C")</p>
                        </div>
                        <div class="span1 center">
                            <p>@item.NumberOfDays</p>
                        </div>
                        <div class="span1 pull-right">
                            <p>@item.SecurityDeposit.ToString("C")</p>
                        </div>
                        <div class="span1 pull-right">
                            <p>@(((item.UnitPrice * item.NumberOfDays) + item.SecurityDeposit).ToString("C"))</p>
                        </div>
                    </div>
                }
                <div class="row-fluid vpad10 border-up-down">
                    <div class="span10 hright">
                        <strong>Order Total:</strong>
                    </div>
                    <div class="span2 hright">
                        <p>@Model.ToList()[0].Order.Total.ToString("C")</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="span3">
        <div class="row-fluid">
            <div id="right_panel" class="span12 accordion">
                <h2>Q&A</h2>
                <div class="QnA accordion-group">
                    <div class="accordion-heading" id="Q1">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#right_panel" href="#A1">What Next?</a>
                    </div>
                    <div class="accordion-body in collapse" id="A1">
                        <div class="accordion-inner">
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, 
                            sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
                            Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi 
                            ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit 
                            in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint 
                            occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim 
                            id est laborum.
                        </div>
                    </div>
                </div>
                <div class="QnA accordion-group">
                    <div class="accordion-heading" id="Q2">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#right_panel" href="#A2">What is the Rambla Security Code?</a>
                    </div>
                    <div class="accordion-body collapse" id="A2">
                        <div class="accordion-inner">
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, 
                            sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
                            Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi 
                            ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit 
                            in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint 
                            occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim 
                            id est laborum.
                        </div>
                    </div>
                </div>
                <div class="QnA accordion-group">
                    <div class="accordion-heading" id="Q3">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#right_panel" href="#A3">How do I contact the Owner?</a>
                    </div>
                    <div class="accordion-body collapse" id="A3">
                        <div class="accordion-inner">
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, 
                            sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
                            Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi 
                            ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit 
                            in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint 
                            occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim 
                            id est laborum.
                        </div>
                    </div>
                </div>
                <div class="QnA accordion-group">
                    <div class="accordion-heading" id="Q4">
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#right_panel" href="#A4">What if the item doesn't match the Rambla listing?</a>
                    </div>
                    <div class="accordion-body collapse" id="A4">
                        <div class="accordion-inner">
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, 
                            sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
                            Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi 
                            ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit 
                            in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint 
                            occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim 
                            id est laborum.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container_12">
    <div class="header_to_body_gap"></div>
    <div class="grid_12">
        <div>
            <div id="Check_Out_Complete_Title" class="title_container">
                <h1>
                    Congratulations!
                </h1>
                <h2 id="Check_Out_Complete_Subtitle" class="page_subtitle">
                    Your rental order is complete. Here is a summary.
                </h2>
            </div>
        </div>
        <div id="checkout-container" class="container">
            <table class="check_out_complete">
                <thead>
                    <tr>
                        <th>Item Image</th>
                        <th>Name</th>
                        <th>Description</th>
                        <th>Rented From</th>
                        <th>Pickup Date</th>
                        <th>Return Date</th>
                        <th>Price/Day</th>
                        <th>Security Deposit</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody>
                    @{
                        decimal OrderTotal = 0;
                    }
                    @foreach (var item in Model)
                    {
                        OrderTotal += (item.UnitPrice * item.NumberOfDays) + item.SecurityDeposit;
                        <tr>
                            <td class="items_justify_center">
                                @if (item.Item.ItemImages.Count > 0)
                                {
                                    <img src="@Url.Content("~/Item/GetItemImage/" + item.Item.ItemImages.ToList()[0].Id)" />
                                }
                                else
                                {
                                    <img src="@Url.Content("~/Content/images/default_item_image.jpg")" />
                                }    
                            </td>
                            <td class="item_name">@item.ItemName</td>
                            <td class="item_desc">
                                @if (item.ItemDesc.Length > 50)
                                {
                                    <span>@(item.ItemDesc.Substring(0, 50) + "...")</span>
                                }
                                else
                                {
                                    <span>@item.ItemDesc</span> 
                                }
                            </td>
                            <td class="items_justify_center">@(item.Item.Owner.FirstName + " " + item.Item.Owner.LastName)</td>
                            <td class="items_justify_center">@item.PickupDate.ToLongDateString()</td>
                            <td class="items_justify_center">@item.DrofoffDate.ToLongDateString()</td>
                            <td class="items_justify_right">@item.UnitPrice.ToString("C")</td>
                            <td class="items_justify_right">@item.SecurityDeposit.ToString("C")</td>
                            <td class="items_justify_right">
                                @(((item.UnitPrice * item.NumberOfDays) + item.SecurityDeposit).ToString("C"))
                            </td>
                        </tr>
                    }
                    <tr class="order_total_row">
                        <td colspan="8" class="items_justify_right">
                            <strong>Order Total</strong>
                        </td>
                        <td class="items_justify_right">
                            @OrderTotal.ToString("C")
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
